# P1-01 — 命令与文档对齐（新增 `pm today` + 修正欢迎面板）

> 状态: In-Progress  
> Owner: PO/Strategy（你）执行验收，Dev（claude）执行开发  
> Last Updated: 2025-09-13

## 1) 项目背景与目标

- 背景: 文档与用户故事多次出现 `/pm today`（每日重点推荐），但代码无该命令；CLI 欢迎面板使用了聊天前缀“/pm …”。
- 目标: 新增最小可用 `pm today` 命令（等价 `recommend --count 3`），并修正所有欢迎面板与示例文案，确保 CLI 与文档完全一致。

## 2) 前置学习（必须阅读）

- `src/pm/cli/main.py`（CLI 入口）
- `src/pm/cli/commands/tasks.py`（推荐/解释相关命令封装）
- `README.md`（快速开始/基本用法）

## 3) 具体任务与验收标准（AC）

- 任务 A: 在 `src/pm/cli/main.py` 中新增 `@app.command("today")`，实现为 `show_intelligent_recommendations(None, count=3)` 的别名（支持 `--count` 覆盖）。
- 任务 B: 修正 CLI 欢迎面板与 setup 成功面板，将所有 “/pm …” 改为 “pm …”。
- 任务 C: 在 README 的“基本用法”中新增“智能推荐”小节，包含 `pm today`/`pm recommend`/`pm explain`。

AC：
1. 运行 `poetry run pm today` 可获得不超过 3 条推荐，输出含简短理由（沿用现有推荐展示逻辑）。
2. README 与 CLI 欢迎/成功面板中不再出现错误示例（如 “/pm …”）。
3. `poetry run pm` 首屏与 README 示例一致。

## 4) 执行与验证步骤

建议实现步骤：
1. 在 `main.py` 中新增 `today` 命令，复用 `show_intelligent_recommendations`。
2. 修正 `setup` 成功面板与默认欢迎面板的命令行示例。
3. 更新 `README.md` 基本用法，新增“智能推荐”小节。

自验证：
```bash
rg -n "\\B/pm\\b"  # 不应有匹配
poetry run pm --version
poetry run pm            # 检查首屏文案
poetry run pm today      # 返回推荐
```

## 5) 交付物

- 代码: `src/pm/cli/main.py` 新增 `today` 命令，修正文案
- 文档: `README.md` 新增“智能推荐”小节
- 验收记录: 本文档更新“状态: Done + 自验证记录”
