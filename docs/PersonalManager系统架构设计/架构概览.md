# 🏗️ 架构概览

## 系统整体架构图

> **注意**: 以下Mermaid图仍反映旧的CLI交互模式。未来需要更新以体现“对话式AI作为主要交互界面，并调用`PersonalManager`内部功能”的新架构。

```mermaid
graph TB
    subgraph "PersonalManager 生态系统"
        subgraph "用户交互层"
            CLI[Claude Code CLI]
            OBSIDIAN[Obsidian 知识库]
        end
        
        subgraph "Agent 协调层"
            ORCHESTRATOR[pm-orchestrator<br/>总控Agent]
            
            subgraph "核心管理 Agents"
                PROJECT_MGR[project-manager<br/>项目管理Agent]
                PRIORITY_ENGINE[priority-engine<br/>优先级引擎Agent]
                GOAL_TRACKER[goal-tracker<br/>目标追踪Agent]
                DECISION_SUPPORT[decision-support<br/>决策支持Agent]
            end
            
            subgraph "专业服务 Agents"
                STATUS_ANALYZER[status-analyzer<br/>状态分析Agent]
                INSIGHT_ENGINE[insight-engine<br/>洞见引擎Agent]
                SCHEDULE_MGR[schedule-manager<br/>日程管理Agent]
                AUTOMATION_MGR[automation-manager<br/>自动化管理Agent]
            end
        end
        
        subgraph "数据服务层"
            DATA_STORE[(本地数据存储)]
            CONFIG_MGR[配置管理器]
            CACHE_MGR[缓存管理器]
        end
        
        subgraph "外部集成层"
            GOOGLE_API[Google APIs<br/>Calendar/Gmail/Tasks]
            GIT_INTEGRATION[Git 集成]
            FILE_SYSTEM[文件系统监控]
        end
    end
    
    CLI --> ORCHESTRATOR
    OBSIDIAN --> DATA_STORE
    ORCHESTRATOR --> PROJECT_MGR
    ORCHESTRATOR --> PRIORITY_ENGINE
    ORCHESTRATOR --> GOAL_TRACKER
    ORCHESTRATOR --> DECISION_SUPPORT
    
    PROJECT_MGR --> STATUS_ANALYZER
    PRIORITY_ENGINE --> INSIGHT_ENGINE
    GOAL_TRACKER --> SCHEDULE_MGR
    DECISION_SUPPORT --> AUTOMATION_MGR
    
    STATUS_ANALYZER --> DATA_STORE
    INSIGHT_ENGINE --> DATA_STORE
    SCHEDULE_MGR --> GOOGLE_API
    AUTOMATION_MGR --> GIT_INTEGRATION
    AUTOMATION_MGR --> FILE_SYSTEM
    
    DATA_STORE --> CONFIG_MGR
    DATA_STORE --> CACHE_MGR
```

## 核心设计原则

1. **AI优先/工具化设计**: `PersonalManager`的核心功能将作为AI可调用的工具集，通过自然语言交互。
2. **模块化松耦合**: 每个Agent专注单一职责，通过标准化接口通信。
3. **数据驱动**: 所有决策基于结构化数据和智能算法。
4. **配置优先**: 最大化利用BMAD框架的配置能力，减少硬编码。
5. **智能增强**: 19本书的洞见作为决策支持的核心算法。
6. **故障容错**: 每个模块都有独立的错误处理和恢复机制。

---


## 核心设计原则

1. **AI优先/工具化设计**: `PersonalManager`的核心功能将作为AI可调用的工具集，通过自然语言交互。
2. **模块化松耦合**: 每个Agent专注单一职责，通过标准化接口通信。
3. **数据驱动**: 所有决策基于结构化数据和智能算法。
4. **配置优先**: 最大化利用BMAD框架的配置能力，减少硬编码。
5. **智能增强**: 19本书的洞见作为决策支持的核心算法。
6. **故障容错**: 每个模块都有独立的错误处理和恢复机制。

---
