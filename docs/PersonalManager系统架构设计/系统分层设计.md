# 🏢 系统分层设计

## 1. 用户交互层 (Presentation Layer)

**职责**: 提供用户与AI的自然语言交互界面，并作为AI调用`PersonalManager`核心功能的入口。

- **对话式AI (Gemini/Claude)**: 主要交互界面
  - 用户通过自然语言向AI下达指令。
  - AI理解用户意图，并决定何时调用`PersonalManager`的内部功能。
  - `PersonalManager`的核心功能（如任务捕获、报告生成、日历同步等）将作为**AI可调用的工具**暴露给AI。

- **Obsidian 集成**: 可视化知识管理与辅助交互
  - 项目状态文档展示与编辑。
  - 思维导图和关系图。
  - 作为AI读取和写入项目文档的辅助界面。

## 2. Agent 协调层 (Agent Orchestration Layer)

**职责**: Agent间的协调、消息路由和工作流管理

- **总控 Agent**: 统一入口和流程协调
- **核心管理 Agents**: 核心业务逻辑处理
- **专业服务 Agents**: 专门化功能支持

## 3. 数据服务层 (Data Service Layer)

**职责**: 数据持久化、缓存管理和配置管理

- **本地数据存储**: JSON/YAML 格式的结构化数据
- **配置管理器**: 动态配置和参数管理
- **缓存管理器**: 性能优化和数据缓存

## 4. 外部集成层 (Integration Layer)

**职责**: 与外部系统的集成和数据同步

- **Google APIs 集成**: 日历、邮件、任务同步
- **Git 集成**: 代码活动监控和自动化
- **文件系统监控**: 项目文件变化检测

---
