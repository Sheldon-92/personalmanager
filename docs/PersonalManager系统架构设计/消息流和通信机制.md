# ğŸ”„ æ¶ˆæ¯æµå’Œé€šä¿¡æœºåˆ¶

## Agent é—´é€šä¿¡æ¶æ„

```mermaid
sequenceDiagram
    participant User
    participant Orchestrator
    participant PriorityEngine
    participant ProjectManager
    participant StatusAnalyzer
    participant DataStore
    
    User->>Orchestrator: /pm "ä»Šå¤©åšä»€ä¹ˆ"
    Orchestrator->>DataStore: è·å–å½“å‰é¡¹ç›®çŠ¶æ€
    DataStore-->>Orchestrator: é¡¹ç›®æ•°æ®
    
    Orchestrator->>StatusAnalyzer: åˆ†æé¡¹ç›®å¥åº·åº¦
    StatusAnalyzer->>DataStore: æŸ¥è¯¢Git/æ–‡ä»¶æ•°æ®
    DataStore-->>StatusAnalyzer: æ´»åŠ¨æ•°æ®
    StatusAnalyzer-->>Orchestrator: é¡¹ç›®çŠ¶æ€æŠ¥å‘Š
    
    Orchestrator->>PriorityEngine: è®¡ç®—ä»»åŠ¡ä¼˜å…ˆçº§
    PriorityEngine->>DataStore: è·å–ä»»åŠ¡å’Œç›®æ ‡æ•°æ®
    DataStore-->>PriorityEngine: ä»»åŠ¡åˆ—è¡¨
    PriorityEngine-->>Orchestrator: ä¼˜å…ˆçº§æ’åº
    
    Orchestrator->>ProjectManager: è·å–é¡¹ç›®å»ºè®®
    ProjectManager-->>Orchestrator: é¡¹ç›®ç®¡ç†å»ºè®®
    
    Orchestrator-->>User: ä»Šæ—¥å·¥ä½œå»ºè®®
```

## æ¶ˆæ¯åè®®è®¾è®¡

```yaml
message_protocol:
  version: "1.0"
  
  message_types:
    request:
      id: string (uuid)
      timestamp: datetime
      sender: string (agent_id)
      receiver: string (agent_id)
      type: enum [query, command, notification]
      payload: object
      priority: enum [low, normal, high, critical]
      
    response:
      id: string (uuid)
      request_id: string (reference_to_request)
      timestamp: datetime
      sender: string (agent_id)
      receiver: string (agent_id)
      status: enum [success, error, partial]
      payload: object
      error_details: object (if status=error)
      
    event:
      id: string (uuid)
      timestamp: datetime
      source: string (agent_id)
      event_type: string
      data: object
      propagation: enum [broadcast, targeted]
      
  routing_rules:
    priority_based: true
    load_balancing: false
    circuit_breaker: true
    retry_policy:
      max_retries: 3
      backoff_strategy: exponential
      timeout: 30s
```

## æ•°æ®åŒæ­¥æœºåˆ¶

```yaml
data_sync:
  strategy: event_driven
  
  sync_triggers:
    - user_action: immediate_sync
    - scheduled_task: batch_sync
    - external_change: triggered_sync
    - system_startup: full_sync
    
  conflict_resolution:
    local_vs_remote:
      strategy: last_write_wins
      exceptions:
        - user_manual_edits: preserve_manual
        - critical_data: manual_resolution
        
  sync_queues:
    high_priority: user_actions, critical_updates
    normal_priority: scheduled_updates, status_changes
    low_priority: historical_data, analytics
    
  data_consistency:
    level: eventual_consistency
    conflict_detection: timestamp_based
    resolution_timeout: 5_minutes
    rollback_capability: true
```

---
