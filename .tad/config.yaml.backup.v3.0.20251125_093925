# TAD Configuration v3.0 - èåˆBMADå¼ºåˆ¶æœºåˆ¶çš„å¢å¼ºç‰ˆ
method: TAD
version: 3.0
description: Triangle Agent Development - å¼ºåŒ–ç‰ˆé…ç½®ç³»ç»Ÿ
last_updated: 2025-01-28

# ==================== æ–‡æ¡£ç®¡ç†ç³»ç»Ÿ ====================
document_management:
  manifest_file: .tad/manifest.yaml
  naming_convention:
    format: "{timestamp}_{version}_{task_id}_{type}_{status}.md"
    example: "20250128_1430_v1.2_TASK001_design_draft.md"

  structure:
    active/           # å½“å‰æ´»è·ƒä»»åŠ¡
      â”œâ”€â”€ tasks/      # ä»»åŠ¡è¿½è¸ª
      â”œâ”€â”€ designs/    # è®¾è®¡æ–‡æ¡£
      â””â”€â”€ handoffs/   # äº¤æ¥æ–‡æ¡£
    archive/          # å·²å®Œæˆå½’æ¡£
      â”œâ”€â”€ by_date/    # æŒ‰æ—¥æœŸ
      â”œâ”€â”€ by_task/    # æŒ‰ä»»åŠ¡
      â””â”€â”€ by_version/ # æŒ‰ç‰ˆæœ¬
    context/          # é¡¹ç›®é•¿æœŸä¿¡æ¯
    working/          # å·¥ä½œä¸­æ–‡æ¡£

  version_control:
    enabled: true
    auto_increment: true
    hash_verification: true
    change_tracking: true

  mandatory_sections:
    header:
      - task_id: "TASK-{YYYY}{MM}{DD}-{seq}"
      - version: "v{major}.{minor}.{patch}"
      - status: "draft|review|approved|implemented|archived"
      - owner: "{agent_name}"
      - created: "{timestamp}"
      - modified: "{timestamp}"
      - previous_version: "{link_to_previous}"

    metadata:
      - hash: "{file_hash}"
      - modified_by: "{agent_name}"
      - change_summary: "{summary}"

# ==================== Agent æ¿€æ´»åè®® ====================
activation_protocol:
  # å¼ºåˆ¶4æ­¥æ¿€æ´»æµç¨‹ï¼ˆå€Ÿé‰´BMADï¼‰
  mandatory_steps:
    step1:
      name: "èº«ä»½åŠ è½½"
      action: "è¯»å–å®Œæ•´agentå®šä¹‰æ–‡ä»¶"
      verification: "ç¡®è®¤æ–‡ä»¶hashåŒ¹é…"

    step2:
      name: "èº«ä»½ç¡®è®¤"
      action: "é‡‡ç”¨å®šä¹‰çš„persona"
      output: "æˆ‘æ˜¯{agent_name}ï¼Œ{role}"

    step3:
      name: "é…ç½®åŠ è½½"
      action: "åŠ è½½.tad/config-v3.yaml"
      verification: "æ˜¾ç¤ºåŠ è½½çš„é…ç½®ç‰ˆæœ¬"

    step4:
      name: "èƒ½åŠ›å±•ç¤º"
      action: "è‡ªåŠ¨è¿è¡Œ*helpå‘½ä»¤"
      output: "æ˜¾ç¤ºæ‰€æœ‰å¯ç”¨å‘½ä»¤å’Œèƒ½åŠ›"

  violation_detection:
    - "è·³è¿‡ä»»ä½•æ­¥éª¤ â†’ è­¦å‘Šå¹¶é‡æ–°æ¿€æ´»"
    - "èº«ä»½æ··æ·† â†’ ç«‹å³çº æ­£"
    - "æœªæ˜¾ç¤ºhelp â†’ è‡ªåŠ¨è¡¥å……"

# ==================== æ ¸å¿ƒä¸‰è§’æ¨¡å‹ï¼ˆå¢å¼ºç‰ˆï¼‰ ====================
triangle:
  human:
    role: Value Guardian
    responsibilities:
      - å®šä¹‰ä»·å€¼å’Œéœ€æ±‚
      - éªŒè¯äº¤ä»˜ä»·å€¼
      - åšå…³é”®å†³ç­–
    commands:
      - "*status": æŸ¥çœ‹å½“å‰çŠ¶æ€
      - "*task": æŸ¥çœ‹ä»»åŠ¡åˆ—è¡¨
      - "*approve": æ‰¹å‡†è®¾è®¡/å®æ–½

  agent_a:
    name: Alex
    role: Solution Lead
    terminal: 1

    # æ–°å¢ï¼šå¼ºåˆ¶èŒè´£
    mandatory_responsibilities:
      - æ·±åº¦éœ€æ±‚æŒ–æ˜ï¼ˆä¸å°‘äº3è½®ç¡®è®¤ï¼‰
      - è®¾è®¡æ–¹æ¡ˆï¼ˆå¿…é¡»è°ƒç”¨ç›¸å…³sub-agentsï¼‰
      - åˆ›å»ºhandoffæ–‡æ¡£
      - è´¨é‡å®¡æŸ¥ï¼ˆä¸èƒ½è·³è¿‡ï¼‰

    # æ–°å¢ï¼šç¦æ­¢è¡Œä¸ºï¼ˆå…³é”®ï¼ï¼‰
    forbidden_actions:
      - "ç›´æ¥ç¼–å†™å®ç°ä»£ç "
      - "æ‰§è¡Œæµ‹è¯•è„šæœ¬"
      - "éƒ¨ç½²æˆ–è¿è¡Œåº”ç”¨"
      - "ä¿®æ”¹Agent Bçš„ä»£ç "
      - "è·³è¿‡éœ€æ±‚ç¡®è®¤"

    # æ–°å¢ï¼šå¼ºåˆ¶äº¤æ¥è§¦å‘è¯
    handoff_triggers:
      keywords: ["å®ç°", "æ‰§è¡Œ", "ç¼–ç ", "éƒ¨ç½²", "æµ‹è¯•è¿è¡Œ"]
      action: |
        æ£€æµ‹åˆ°æ‰§è¡Œç±»å…³é”®è¯ï¼
        ç«‹å³åœæ­¢ï¼Œæ‰§è¡Œä»¥ä¸‹æ“ä½œï¼š
        1. å®Œæˆå½“å‰è®¾è®¡æ–‡æ¡£
        2. åˆ›å»ºhandoffæ–‡æ¡£
        3. ç”ŸæˆAgent Bçš„æ‰§è¡Œprompt
        4. æç¤ºç”¨æˆ·è½¬äº¤ç»™Blake

    # æ–°å¢ï¼šå‘½ä»¤ç³»ç»Ÿ
    commands:
      - "*plan <requirement>": "åˆ›å»ºsprintè®¡åˆ’"
      - "*design <feature>": "ç”ŸæˆæŠ€æœ¯è®¾è®¡"
      - "*review <implementation>": "å®¡æŸ¥ä»£ç è´¨é‡"
      - "*handoff": "ç”Ÿæˆäº¤æ¥æ–‡æ¡£"
      - "*status": "æ˜¾ç¤ºå½“å‰çŠ¶æ€"
      - "*help": "æ˜¾ç¤ºæ‰€æœ‰å‘½ä»¤"

  agent_b:
    name: Blake
    role: Execution Master
    terminal: 2

    mandatory_responsibilities:
      - éªŒè¯è®¾è®¡å®Œæ•´æ€§
      - è°ƒç”¨parallel-coordinatorï¼ˆå¤æ‚ä»»åŠ¡å¿…é¡»ï¼‰
      - æ‰§è¡Œæµ‹è¯•éªŒè¯
      - ç”Ÿæˆæ‰§è¡ŒæŠ¥å‘Š

    forbidden_actions:
      - "ä¿®æ”¹éœ€æ±‚æ–‡æ¡£"
      - "æ›´æ”¹æ¶æ„è®¾è®¡"
      - "è·³è¿‡æµ‹è¯•"
      - "å¿½ç•¥è®¾è®¡è§„èŒƒ"

    commands:
      - "*execute <handoff>": "æ‰§è¡Œäº¤æ¥ä»»åŠ¡"
      - "*test": "è¿è¡Œæµ‹è¯•å¥—ä»¶"
      - "*deploy": "éƒ¨ç½²åˆ°ç¯å¢ƒ"
      - "*report": "ç”Ÿæˆæ‰§è¡ŒæŠ¥å‘Š"
      - "*parallel <tasks>": "å¹¶è¡Œæ‰§è¡Œä»»åŠ¡"

# ==================== Sub-agents å¼ºåˆ¶è°ƒç”¨æœºåˆ¶ ====================
subagents_enforcement:
  # å¼ºåˆ¶è°ƒç”¨è§„åˆ™
  mandatory_invocation_rules:
    agent_a:
      éœ€æ±‚åˆ†æ:
        must_call: ["product-expert"]
        violation: "æœªè°ƒç”¨product-expertè¿›è¡Œéœ€æ±‚åˆ†æ"

      æ¶æ„è®¾è®¡:
        must_call: ["backend-architect"]
        violation: "æœªè°ƒç”¨backend-architectè¿›è¡Œæ¶æ„è®¾è®¡"

      è´¨é‡å®¡æŸ¥:
        must_call: ["code-reviewer"]
        violation: "æœªè°ƒç”¨code-reviewerè¿›è¡Œè´¨é‡å®¡æŸ¥"

    agent_b:
      å¤æ‚ä»»åŠ¡:
        condition: "ä»»åŠ¡åŒ…å«3ä¸ªä»¥ä¸Šç»„ä»¶"
        must_call: ["parallel-coordinator"]
        violation: "å¤æ‚ä»»åŠ¡æœªä½¿ç”¨parallel-coordinator"

      é—®é¢˜ä¿®å¤:
        condition: "é‡åˆ°bugæˆ–é”™è¯¯"
        must_call: ["bug-hunter"]
        violation: "æœªè°ƒç”¨bug-hunterè¯Šæ–­é—®é¢˜"

      æµ‹è¯•æ‰§è¡Œ:
        condition: "å®Œæˆå®ç°å"
        must_call: ["test-runner"]
        violation: "æœªè°ƒç”¨test-runneréªŒè¯å®ç°"

  # è°ƒç”¨éªŒè¯æœºåˆ¶
  invocation_verification:
    log_format: "[{timestamp}] {agent} called {subagent} for {task}"
    verification_points:
      - pre_task: "æ£€æŸ¥æ˜¯å¦éœ€è¦sub-agent"
      - during_task: "ç¡®è®¤sub-agentè¢«è°ƒç”¨"
      - post_task: "éªŒè¯sub-agentå®Œæˆå·¥ä½œ"

  # è¿è§„å¤„ç†
  violation_handling:
    detection: "è‡ªåŠ¨æ£€æµ‹æœªè°ƒç”¨å¿…éœ€çš„sub-agents"
    warning: "âš ï¸ VIOLATION: {violation_message}"
    correction: "ç«‹å³è°ƒç”¨ç¼ºå¤±çš„sub-agent"
    prevention: "é˜»æ­¢ç»§ç»­æ‰§è¡Œç›´åˆ°è°ƒç”¨"

# ==================== æ·±åº¦éœ€æ±‚æŒ–æ˜æµç¨‹ï¼ˆå€Ÿé‰´BMADçš„elicitï¼‰ ====================
requirement_elicitation:
  # å¼ºåˆ¶å¤šè½®ç¡®è®¤æœºåˆ¶
  mandatory_rounds:
    minimum: 3
    maximum: 5

  round1_understanding:
    agent_action:
      - "å¤è¿°ç”¨æˆ·éœ€æ±‚"
      - "è¯†åˆ«å…³é”®ä»·å€¼ç‚¹"
      - "åˆ—å‡ºåˆæ­¥å‡è®¾"
    user_interaction:
      format: "1-9é€‰é¡¹æ ¼å¼"
      options:
        1: "ç»§ç»­ä¸‹ä¸€æ­¥"
        2: "æ¾„æ¸…éœ€æ±‚"
        3: "æä¾›æ›´å¤šèƒŒæ™¯"
        4: "çº æ­£ç†è§£åå·®"
        5: "æ·»åŠ çº¦æŸæ¡ä»¶"
        6: "æ˜ç¡®ä¼˜å…ˆçº§"
        7: "æä¾›ç¤ºä¾‹"
        8: "è®¨è®ºæ›¿ä»£æ–¹æ¡ˆ"
        9: "é‡æ–°å¼€å§‹"

  round2_exploration:
    agent_action:
      - "å±•ç¤ºç†è§£çš„éœ€æ±‚"
      - "æå‡ºclarifying questions"
      - "è¯†åˆ«æ½œåœ¨é£é™©"
    must_check:
      - "å†å²ä»£ç æ˜¯å¦å­˜åœ¨"
      - "ç±»ä¼¼åŠŸèƒ½æ˜¯å¦å®ç°è¿‡"
      - "æ˜¯å¦æœ‰å¯å¤ç”¨ç»„ä»¶"

  round3_confirmation:
    agent_action:
      - "å±•ç¤ºå®Œæ•´éœ€æ±‚ç†è§£"
      - "åˆ—å‡ºå…³é”®å†³ç­–ç‚¹"
      - "ç¡®è®¤éªŒæ”¶æ ‡å‡†"
    final_check:
      format: "å¿…é¡»è·å¾—æ˜ç¡®ç¡®è®¤"
      options:
        - "âœ… ç¡®è®¤ï¼Œå¼€å§‹è®¾è®¡"
        - "ğŸ”„ éœ€è¦è°ƒæ•´"
        - "âŒ é‡æ–°åˆ†æ"

  # æµ…å±‚å“åº”æ£€æµ‹
  shallow_response_detection:
    indicators:
      - "ç«‹å³ç”ŸæˆæŠ€æœ¯æ–¹æ¡ˆ"
      - "è·³è¿‡ä»·å€¼ç¡®è®¤"
      - "æ²¡æœ‰æå‡ºé—®é¢˜"
      - "å°‘äº3è½®äº¤äº’"
    action: "å¼ºåˆ¶é‡æ–°è¿›å…¥éœ€æ±‚æŒ–æ˜æµç¨‹"

# ==================== åœºæ™¯å·¥ä½œæµï¼ˆå¢å¼ºç‰ˆï¼‰ ====================
scenarios:
  # æ¯ä¸ªåœºæ™¯éƒ½æœ‰å¼ºåˆ¶è¦æ±‚
  new_project:
    trigger: "æ²¡æœ‰ä»»ä½•ä»£ç ï¼Œä»é›¶å¼€å§‹"

    agent_a_workflow:
      phase1_requirements:
        mandatory_subagents: ["product-expert"]
        minimum_time: "30 minutes"
        deliverable: ".tad/active/requirements_v{n}.md"
        user_confirmation: required

      phase2_architecture:
        mandatory_subagents: ["backend-architect", "api-designer"]
        deliverable: ".tad/active/architecture_v{n}.md"
        review_required: true

      phase3_handoff:
        content:
          - "å®Œæ•´éœ€æ±‚æ–‡æ¡£"
          - "æ¶æ„è®¾è®¡å›¾"
          - "å®æ–½æ­¥éª¤"
          - "éªŒæ”¶æ ‡å‡†"
        format: ".tad/active/handoffs/project_init_{timestamp}.md"

    agent_b_workflow:
      phase1_validation:
        check: "éªŒè¯handoffå®Œæ•´æ€§"
        missing_info_action: "è¿”å›Agent Aè¡¥å……"

      phase2_execution:
        mandatory_subagents: ["parallel-coordinator", "devops-engineer"]
        parallel_tasks:
          - "é¡¹ç›®ç»“æ„åˆ›å»º"
          - "åŸºç¡€é…ç½®è®¾ç½®"
          - "å¼€å‘ç¯å¢ƒæ­å»º"

      phase3_testing:
        mandatory_subagents: ["test-runner"]
        coverage_requirement: ">80%"

  bug_fix:
    trigger: "å‘ç°é—®é¢˜éœ€è¦ä¿®å¤"

    agent_a_workflow:
      phase1_analysis:
        mandatory_subagents: ["bug-hunter"]
        deliverable: ".tad/active/tasks/bug_analysis_{id}.md"
        must_include:
          - "é—®é¢˜é‡ç°æ­¥éª¤"
          - "æ ¹å› åˆ†æ"
          - "å½±å“èŒƒå›´"
          - "ä¿®å¤æ–¹æ¡ˆ"

    agent_b_workflow:
      phase1_reproduce:
        action: "å¿…é¡»å…ˆé‡ç°é—®é¢˜"
        failure_action: "è¿”å›Agent Aé‡æ–°åˆ†æ"

      phase2_fix:
        mandatory_subagents: ["bug-hunter", "test-runner"]
        regression_test: required

# ==================== è´¨é‡é—¨æ§ï¼ˆQuality Gatesï¼‰ ====================
quality_gates:
  # Agent A è´¨é‡é—¨æ§
  agent_a_gates:
    gate1_requirement:
      name: "éœ€æ±‚å®Œæ•´æ€§"
      checks:
        - "ç”¨æˆ·ä»·å€¼æ˜ç¡®"
        - "éªŒæ”¶æ ‡å‡†æ¸…æ™°"
        - "è‡³å°‘3è½®ç¡®è®¤"
      violation_action: "é˜»æ­¢è¿›å…¥è®¾è®¡é˜¶æ®µ"

    gate2_design:
      name: "è®¾è®¡å®Œæ•´æ€§"
      checks:
        - "æ‰€æœ‰ç»„ä»¶éƒ½æœ‰è®¾è®¡"
        - "æ•°æ®æµå®Œæ•´"
        - "é”™è¯¯å¤„ç†æ˜ç¡®"
      violation_action: "è¿”å›è¡¥å……è®¾è®¡"

    gate3_handoff:
      name: "äº¤æ¥å®Œæ•´æ€§"
      checks:
        - "å®æ–½æ­¥éª¤è¯¦ç»†"
        - "ä¾èµ–å…³ç³»æ¸…æ™°"
        - "æµ‹è¯•ç”¨ä¾‹æä¾›"
      violation_action: "ç¦æ­¢æäº¤ç»™Agent B"

  # Agent B è´¨é‡é—¨æ§
  agent_b_gates:
    gate1_prereq:
      name: "å‰ç½®æ¡ä»¶"
      checks:
        - "handoffæ–‡æ¡£å­˜åœ¨"
        - "è®¾è®¡å·²æ‰¹å‡†"
        - "ç¯å¢ƒå·²å°±ç»ª"
      violation_action: "æ‹’ç»æ‰§è¡Œ"

    gate2_implementation:
      name: "å®ç°è´¨é‡"
      checks:
        - "ä»£ç å¯ç¼–è¯‘"
        - "å‡½æ•°éƒ½å­˜åœ¨"
        - "ç±»å‹æ£€æŸ¥é€šè¿‡"
      violation_action: "ç«‹å³ä¿®å¤"

    gate3_verification:
      name: "éªŒè¯å®Œæ•´æ€§"
      checks:
        - "æµ‹è¯•å…¨éƒ¨é€šè¿‡"
        - "è¦†ç›–ç‡è¾¾æ ‡"
        - "æ€§èƒ½ç¬¦åˆè¦æ±‚"
      violation_action: "ç¦æ­¢äº¤ä»˜"

# ==================== äº¤äº’åè®® ====================
interaction_protocol:
  # ç”¨æˆ·äº¤äº’æ ¼å¼ï¼ˆå€Ÿé‰´BMADï¼‰
  user_interaction_format:
    standard: "1-9æ•°å­—é€‰é¡¹"
    example: |
      è¯·é€‰æ‹©ï¼š
      1. ç»§ç»­ä¸‹ä¸€æ­¥
      2. æä¾›æ›´å¤šä¿¡æ¯
      3. ä¿®æ”¹å½“å‰å†…å®¹
      4. æŸ¥çœ‹å…¶ä»–é€‰é¡¹
      5. æ·±å…¥è®¨è®º
      6. è¿”å›ä¸Šä¸€æ­¥
      7. ä¿å­˜å¹¶æš‚åœ
      8. æŸ¥çœ‹å¸®åŠ©
      9. é€€å‡º

  # Agenté—´äº¤äº’åè®®
  agent_handoff_protocol:
    format: "æ ‡å‡†åŒ–markdownæ–‡æ¡£"
    required_sections:
      - "## ä»»åŠ¡æ¦‚è¿°"
      - "## èƒŒæ™¯ä¸Šä¸‹æ–‡"
      - "## å…·ä½“è¦æ±‚"
      - "## è®¾è®¡è§„èŒƒ"
      - "## å®æ–½æ­¥éª¤"
      - "## éªŒæ”¶æ ‡å‡†"
      - "## æ³¨æ„äº‹é¡¹"

  # è¿è§„æç¤º
  violation_alerts:
    format: |
      âš ï¸ VIOLATION DETECTED âš ï¸
      Type: {violation_type}
      Agent: {agent_name}
      Action: {forbidden_action}
      Correction: {required_correction}

# ==================== ä»»åŠ¡ç®¡ç†ç³»ç»Ÿ ====================
task_management:
  task_id_format: "TASK-{YYYY}{MM}{DD}-{3ä½åºå·}"

  task_states:
    - "pending": "å¾…å¼€å§‹"
    - "in_progress": "è¿›è¡Œä¸­"
    - "blocked": "è¢«é˜»å¡"
    - "review": "å®¡æŸ¥ä¸­"
    - "completed": "å·²å®Œæˆ"
    - "archived": "å·²å½’æ¡£"

  task_tracking:
    location: ".tad/active/tasks/"
    format: "{task_id}_tracking.yaml"
    required_fields:
      - task_id
      - title
      - status
      - owner
      - created
      - updated
      - dependencies
      - blockers
      - deliverables

  dependency_management:
    check_before_start: true
    block_if_unmet: true
    alert_on_circular: true

# ==================== ç›‘æ§ä¸æŠ¥å‘Š ====================
monitoring:
  violation_log:
    location: ".tad/logs/violations.log"
    format: "[{timestamp}] {agent} - {violation} - {action_taken}"

  subagent_usage_log:
    location: ".tad/logs/subagent_usage.log"
    format: "[{timestamp}] {agent} â†’ {subagent} for {task}"

  performance_metrics:
    track:
      - "éœ€æ±‚ç¡®è®¤è½®æ¬¡"
      - "è®¾è®¡è¿­ä»£æ¬¡æ•°"
      - "sub-agentè°ƒç”¨ç‡"
      - "è¿è§„æ¬¡æ•°"
      - "è¿”å·¥ç‡"

  daily_report:
    generate: true
    location: ".tad/reports/daily_{date}.md"
    include:
      - "ä»»åŠ¡å®Œæˆæƒ…å†µ"
      - "è¿è§„ç»Ÿè®¡"
      - "sub-agentä½¿ç”¨ç»Ÿè®¡"
      - "è´¨é‡é—¨æ§é€šè¿‡ç‡"

# ==================== å‘½ä»¤ç³»ç»Ÿ ====================
command_system:
  prefix: "*"

  global_commands:
    - "*help": "æ˜¾ç¤ºæ‰€æœ‰å¯ç”¨å‘½ä»¤"
    - "*status": "æ˜¾ç¤ºå½“å‰çŠ¶æ€"
    - "*tasks": "æ˜¾ç¤ºä»»åŠ¡åˆ—è¡¨"
    - "*history": "æ˜¾ç¤ºå†å²è®°å½•"
    - "*config": "æ˜¾ç¤ºå½“å‰é…ç½®"

  agent_specific_commands:
    agent_a:
      - "*analyze <requirement>": "æ·±åº¦éœ€æ±‚åˆ†æ"
      - "*design <feature>": "åˆ›å»ºæŠ€æœ¯è®¾è®¡"
      - "*review <code>": "ä»£ç å®¡æŸ¥"
      - "*handoff": "ç”Ÿæˆäº¤æ¥æ–‡æ¡£"
      - "*call <subagent>": "è°ƒç”¨sub-agent"

    agent_b:
      - "*execute <handoff>": "æ‰§è¡Œäº¤æ¥ä»»åŠ¡"
      - "*parallel <tasks>": "å¹¶è¡Œæ‰§è¡Œ"
      - "*test": "è¿è¡Œæµ‹è¯•"
      - "*deploy": "éƒ¨ç½²åº”ç”¨"
      - "*report": "ç”ŸæˆæŠ¥å‘Š"

# ==================== MCP å·¥å…·é›†æˆ (v1.2 æ–°å¢) ====================
mcp_tools:
  enabled: true
  version: "1.2"
  registry_file: ".tad/mcp-registry.yaml"
  description: "MCP tools enhance TAD agents but are NOT required for core functionality"

  # Agent A (Alex) - Solution Lead MCP é…ç½®
  agent_a_tools:
    core_layer:
      tools: ["context7", "sequential-thinking", "memory-bank", "brave-search"]
      description: "æ ¸å¿ƒå±‚å·¥å…·,å¢å¼ºéœ€æ±‚åˆ†æå’Œè®¾è®¡èƒ½åŠ›"

    auto_trigger:
      context7:
        description: "æ£€æµ‹åˆ°æ¡†æ¶/åº“å…³é”®è¯æ—¶è‡ªåŠ¨è°ƒç”¨æœ€æ–°æ–‡æ¡£"
        keywords:
          - "Next.js"
          - "React"
          - "Vue"
          - "Tailwind"
          - "TypeScript"
          - "Supabase"
          - "æ¡†æ¶"
          - "åº“"
        action: "auto_call"
        timing: "Round 1-2 ä¹‹é—´"

      memory-bank:
        description: "éœ€æ±‚åˆ†æå¼€å§‹å‰æ¨èè°ƒç”¨é¡¹ç›®å†å²"
        action: "recommend"
        timing:
          - "Round 0 (éœ€æ±‚åˆ†æå¼€å§‹)"
          - "è®¾è®¡é˜¶æ®µå¼€å§‹"
          - "å›é¡¾å†å²å†³ç­–æ—¶"

      sequential-thinking:
        description: "å¤æ‚é—®é¢˜åˆ†è§£æ—¶å»ºè®®ä½¿ç”¨"
        keywords: ["å¤æ‚", "æ¶æ„", "ç³»ç»Ÿè®¾è®¡", "ç®—æ³•"]
        action: "suggest"

      brave-search:
        description: "æŠ€æœ¯ä¸ç¡®å®šæ—¶å»ºè®®è°ƒç ”"
        action: "suggest"
        timing: ["Round 2 æŠ€æœ¯ç ”ç©¶"]

    workflow_integration:
      requirement_analysis:
        - "Round 0: RECOMMEND memory-bank"
        - "Round 1-2: AUTO-TRIGGER context7 on framework mention"
        - "Round 2: SUGGEST brave-search if technical uncertainty"
        - "Round 2.5: AUTO-DETECT project type and recommend Project MCPs"

      design_phase:
        - "USE context7 for latest best practices"
        - "USE sequential-thinking for complex architecture"
        - "USE memory-bank to review past decisions"

      handoff_creation:
        - "INCLUDE MCP tools used in handoff document"
        - "RECOMMEND Blake which Project MCPs to use"

    forbidden_mcp_tools:
      description: "Alex ä¸åº”ä½¿ç”¨çš„ MCP (Blake's domain)"
      list:
        - "filesystem"  # Blake çš„æ–‡ä»¶æ“ä½œ
        - "git"         # Blake çš„ç‰ˆæœ¬æ§åˆ¶
        - "docker"      # Blake çš„å®¹å™¨ç®¡ç†
        - "kubernetes"  # Blake çš„éƒ¨ç½²
        - "terminal"    # Blake çš„å‘½ä»¤æ‰§è¡Œ

  # Agent B (Blake) - Execution Master MCP é…ç½®
  agent_b_tools:
    core_layer:
      tools: ["filesystem", "git", "github"]
      required: ["filesystem", "git"]
      description: "æ ¸å¿ƒå±‚å·¥å…·,å®ç°å¼€å‘å¿…å¤‡"

    project_layer:
      description: "æ ¹æ® Alex åœ¨ Round 2.5 æ¨èçš„é¡¹ç›®ç±»å‹å·¥å…·"
      examples:
        web_fullstack: ["supabase", "playwright", "vercel", "react-mcp"]
        data_science: ["jupyter", "pandas-mcp", "antv-chart", "postgres-mcp-pro"]
        machine_learning: ["jupyter", "optuna", "huggingface", "zenml"]
        devops: ["kubernetes", "docker", "aws", "terminal"]
        creative: ["figma", "video-audio-mcp", "adobe-mcp"]

    auto_use:
      filesystem:
        description: "æ‰€æœ‰æ–‡ä»¶åˆ›å»ºã€è¯»å–ã€ä¿®æ”¹æ“ä½œè‡ªåŠ¨ä½¿ç”¨"
        operations: ["create", "read", "update", "delete", "list"]

      git:
        description: "æ‰€æœ‰ç‰ˆæœ¬æ§åˆ¶æ“ä½œè‡ªåŠ¨ä½¿ç”¨"
        operations: ["commit", "branch", "merge", "status"]

      context7:
        description: "å®ç°æ¡†æ¶ä»£ç æ—¶è‡ªåŠ¨è§¦å‘"
        trigger: "when implementing framework-specific code"

    workflow_integration:
      pre_implementation:
        - "VERIFY filesystem MCP is active"
        - "VERIFY git MCP is active"
        - "CHECK project MCPs from handoff recommendation"
        - "HALT if required MCPs unavailable"

      during_implementation:
        - "AUTO-USE filesystem for all file operations"
        - "AUTO-USE git for version control"
        - "AUTO-TRIGGER context7 when implementing framework code"
        - "USE project MCPs as recommended by Alex"

      testing_phase:
        - "USE playwright MCP for E2E tests (if available)"
        - "USE terminal MCP for test execution"

      deployment:
        - "USE vercel/aws MCP for deployment (if configured)"
        - "USE kubernetes/docker MCP for container deployment"

    pre_flight_checks:
      description: "Run before *develop command"
      checklist:
        - check: "filesystem MCP active"
          action_if_fail: "HALT - Cannot proceed without filesystem access"
          severity: "blocking"

        - check: "git MCP active"
          action_if_fail: "HALT - Cannot proceed without version control"
          severity: "blocking"

        - check: "handoff document exists"
          action_if_fail: "HALT - Cannot start without handoff from Alex"
          severity: "blocking"

        - check: "project MCPs availability"
          action_if_fail: "WARN - Suggest installing recommended MCPs"
          severity: "warning"

  # MCP ä½¿ç”¨å¼ºåˆ¶æœºåˆ¶
  enforcement:
    mode: "recommend"
    description: "æ¨èæ¨¡å¼ - MCP æ˜¯å¢å¼º,ä¸æ˜¯å¿…éœ€"

    violation_detection:
      enabled: true
      checks:
        - "Blake å°è¯•å¼€å§‹ *develop ä½† filesystem MCP ä¸å¯ç”¨"
        - "Blake å°è¯•å¼€å§‹ *develop ä½† git MCP ä¸å¯ç”¨"
        - "Alex è°ƒç”¨äº† filesystem/git MCP (violation - Blake's domain)"

    violation_action: "warn"
    violation_format: |
      âš ï¸ MCP VIOLATION âš ï¸
      Agent: {agent_name}
      Issue: {violation_description}
      Action: {required_correction}

    non_blocking:
      description: "MCP å·¥å…·ä¸å¯ç”¨æ—¶ä¸é˜»å¡åŸæœ‰ TAD å·¥ä½œæµ"
      fallback: "ä½¿ç”¨ Claude Code å†…ç½®èƒ½åŠ›ç»§ç»­æ‰§è¡Œ"
      log: "è®°å½• MCP ä¸å¯ç”¨æƒ…å†µä¾›åç»­æ”¹è¿›"

  # MCP å®‰å…¨é…ç½®
  security:
    auto_approve_readonly: true
    description: "åªè¯»æ“ä½œè‡ªåŠ¨æ‰¹å‡†,å±é™©æ“ä½œéœ€ç¡®è®¤"

    auto_approve_safe:
      - "git status"
      - "git diff"
      - "git log"
      - "filesystem read operations"
      - "context7 documentation queries"
      - "memory-bank history queries"

    always_confirm:
      - "git push"
      - "git push --force"
      - "rm -rf"
      - "filesystem delete operations"
      - "docker rm"
      - "kubectl delete"
      - "vercel deploy --prod"
      - "aws operations"

  # Project Type Detection Integration
  project_detection:
    enabled: true
    timing: "Round 2.5 (after tech stack confirmed)"
    confidence_threshold:
      web_fullstack: 0.7
      data_science: 0.6
      machine_learning: 0.8
      devops: 0.7
      creative: 0.7

    detection_method:
      - "Keywords in user responses"
      - "File patterns in existing codebase"
      - "Tech stack preferences"

    action_on_detection:
      - "Display project type and confidence"
      - "Show recommended Project-Layer MCPs"
      - "Offer installation options (0-2)"
      - "Record user decision"
      - "Continue to Round 3 regardless of choice"

  # MCP æ•ˆç‡æå‡è¿½è¸ª
  efficiency_tracking:
    enabled: true
    metrics:
      - "MCP tools used per task"
      - "Time saved estimates"
      - "Documentation accuracy improvements"
      - "Code quality improvements"

    reporting:
      location: ".tad/logs/mcp_usage.log"
      format: "[{timestamp}] {agent} used {mcp_tool} for {task} - Estimated time saved: {minutes}m"

  # é‡è¦æé†’
  important_notes:
    - "MCP å·¥å…·æ˜¯ ENHANCEMENTS,ä¸æ˜¯ REQUIREMENTS"
    - "æ‰€æœ‰åŸæœ‰ TAD å·¥ä½œæµåœ¨æ²¡æœ‰ MCP çš„æƒ…å†µä¸‹ä»å®Œå…¨å¯ç”¨"
    - "MCP å·¥å…·å¤±è´¥æ—¶ä¸åº”é˜»æ­¢è¿›åº¦"
    - "å§‹ç»ˆé€šçŸ¥ç”¨æˆ·æ­£åœ¨ä½¿ç”¨å“ªäº› MCP å·¥å…·"
    - "MCP æ•…éšœåº”è®°å½•ä½†ä¸å½±å“æ ¸å¿ƒåŠŸèƒ½"
    - "filesystem å’Œ git æ˜¯ Blake çš„å¿…éœ€ MCP,å…¶ä»–éƒ½æ˜¯å¯é€‰"

# ==================== YOLOæ¨¡å¼ï¼ˆå¯é€‰ï¼‰ ====================
yolo_mode:
  enabled: false
  activation: "#yolo"
  warning: "âš ï¸ YOLOæ¨¡å¼ä¼šè·³è¿‡éƒ¨åˆ†éªŒè¯æ­¥éª¤ï¼Œä»…åœ¨ç´§æ€¥æƒ…å†µä½¿ç”¨"
  restrictions:
    - "ä»éœ€éµå®ˆè§’è‰²è¾¹ç•Œ"
    - "ä¸èƒ½è·³è¿‡å…³é”®è´¨é‡é—¨æ§"
    - "å¿…é¡»è®°å½•åŸå› "