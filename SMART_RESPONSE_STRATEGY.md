# PersonalManager 智能响应策略

> **目的**: 为AI助手提供快速、准确的需求判断和响应策略，确保每个用户请求都得到最合适的处理。

---

## 🧠 快速决策流程

### 30秒决策法则
```
用户需求 → 立即思考以下3个问题：
1. 现有功能能解决吗？(10秒)
2. 这是什么类型的需求？(10秒)
3. 最简单的解决方案是什么？(10秒)
```

---

## 🔍 第一反应检查清单

### ⚡ 即时检查项 (必须在开始任何工作前完成)

```markdown
□ 是否检查了相关CLI命令？
□ 是否检查了现有脚本？
□ 是否检查了自动化任务？
□ 是否检查了数据结构？
□ 是否检查了外部集成功能？
```

### 🎯 关键检查命令快速列表

```bash
# 立即执行这些命令进行功能探索
./bin/pm-local --help                    # 主命令列表
./bin/pm-local habits --help            # 习惯功能
./bin/pm-local gtd --help              # GTD功能 (如果存在)
ls -la scripts/ | grep -v "^d"         # 可用脚本
crontab -l                              # 自动化任务
ls ~/.personalmanager/data/             # 数据结构
```

---

## 📋 需求模式识别

### 🟢 Type A: 功能使用咨询 (直接解答)

**识别特征**:
- "怎么..." / "如何..." / "能不能..."
- "在哪里..." / "怎样查看..."
- "我想看..." / "我想查..."

**立即响应**:
```markdown
1. 演示相关功能：`pm 相关命令`
2. 提供使用示例
3. 如需要，提供更详细说明
```

**示例**:
- 用户："怎么查看今天的任务？"
- 响应："使用 `pm today` 可以查看今日重点推荐"

### 🟡 Type B: 配置调整需求 (轻量修改)

**识别特征**:
- "改成..." / "设置成..." / "调整..."
- "时间改为..." / "频率改为..."
- "添加/删除..." (配置项)

**响应策略**:
```markdown
1. 检查现有配置选项：pm [模块] --help
2. 使用现有配置命令修改
3. 如无配置命令，直接修改配置文件
4. 验证修改效果
```

**示例**:
- 用户："把习惯提醒时间改成9点"
- 响应：直接修改 `~/.personalmanager/data/habits/habits.json`

### 🟠 Type C: 数据操作需求 (临时脚本)

**识别特征**:
- "查找..." / "统计..." / "分析..."
- "清理..." / "删除..." / "导出..."
- "批量..." / "一次性..."

**响应策略**:
```markdown
1. 检查是否有现成的privacy/data命令
2. 编写临时查询/操作脚本
3. 执行后删除脚本（如果是一次性的）
4. 如果可能重复使用，考虑保留并记录
```

**示例**:
- 用户："清理旧的习惯任务"
- 响应：使用现有的 `clean_old_habit_tasks.py` 或类似功能

### 🔴 Type D: 自动化需求 (脚本开发)

**识别特征**:
- "每天自动..." / "定时..." / "监控..."
- "当...时自动..." / "如果...就..."
- "同步..." / "备份..."

**响应策略**:
```markdown
1. 检查现有crontab任务
2. 检查现有同步脚本
3. 评估是否需要新的自动化
4. 创建脚本并配置定时任务
```

**示例**:
- 用户："每天早上自动创建习惯任务"
- 响应：检查现有的 `sync_habits_to_tasks.py` 自动化

### 🔴 Type E: 新功能开发 (完整开发)

**识别特征**:
- "新增..." / "增加功能..." / "实现..."
- "系统应该能够..." / "我需要一个新的..."
- 明确表述现有系统无法满足的需求

**响应策略**:
```markdown
1. 确认现有功能真的无法满足需求
2. 进入完整的功能请求流程
3. 需求分析 → 设计 → 实现 → 验证
4. 完整记录在DEVELOPMENT_LOG.md
```

---

## ⚡ 智能响应模板

### 🔍 功能探索阶段模板

```markdown
我来检查一下现有功能是否能解决您的需求...

**功能探索结果**:
- CLI命令检查: [结果]
- 现有脚本检查: [结果]
- 自动化任务检查: [结果]
- 数据结构检查: [结果]

**结论**: [已有解决方案/需要开发/需要配置调整]
```

### ✅ Type A 响应模板

```markdown
这个功能已经存在！

**使用方法**:
`[具体命令]`

**示例**:
[使用示例]

**相关功能**:
- [其他相关命令]
```

### 🔧 Type B 响应模板

```markdown
这可以通过配置调整来实现。

**方法1**: 使用配置命令
`[配置命令]`

**方法2**: 直接修改配置文件
文件位置: `[配置文件路径]`
修改方式: [具体修改说明]

**验证**: [如何验证修改生效]
```

### 📊 Type C 响应模板

```markdown
我来为您处理这个数据操作需求...

[执行具体操作]

**结果**: [操作结果]
**影响**: [对系统的影响]
**注意**: [需要注意的事项]
```

### 🤖 Type D 响应模板

```markdown
让我检查自动化解决方案...

**现有自动化**:
- [列出相关的现有自动化]

**解决方案**:
[自动化实现方案]

**配置完成**:
- [配置的具体内容]
- [执行频率和时间]
- [如何监控和维护]
```

### 🔄 Type E 响应模板

```markdown
这确实需要新功能开发。让我按照标准流程来处理...

**需求分析**:
- 核心目标: [分析用户真实需求]
- 实现方案: [设计方案]
- 复杂度评估: [开发工作量]

**开始实现**:
[进入完整开发流程]
```

---

## 🚫 避免过度开发的警报触发器

### 🔔 红色警报 (立即停止，重新评估)

当出现以下情况时，必须停下来重新检查：

- 准备写超过50行代码
- 准备创建新的.py文件
- 准备修改core源码
- 预估时间超过30分钟
- 用户只是询问"怎么做"

### 🟡 黄色警报 (谨慎评估)

- 准备写20-50行代码
- 准备创建脚本文件
- 涉及数据结构修改
- 需要新的依赖包

### 🟢 绿色信号 (可以继续)

- 使用现有命令
- 修改配置文件
- 简单的数据查询
- 演示现有功能

---

## 📱 快速参考卡

### 🔧 常见需求 → 立即响应

| 用户表述 | 立即检查 | 快速响应 |
|---------|----------|----------|
| "怎么查看习惯状态？" | `pm habits --help` | `pm habits status` |
| "怎么添加任务？" | `pm --help` | `pm capture "任务内容"` |
| "怎么看今天的重点？" | `pm --help` | `pm today` |
| "习惯时间怎么改？" | 检查habits.json | 直接修改配置文件 |
| "同步出问题了" | 检查cron和scripts | 运行对应同步脚本 |
| "系统状态怎么样？" | `pm --help` | `pm doctor` |

### 🛠️ 功能检查快捷键

```bash
# 快速功能检查命令序列
alias pm-check-habits="./bin/pm-local habits --help"
alias pm-check-gtd="./bin/pm-local capture --help"
alias pm-check-scripts="ls -la scripts/ | grep -E '(sync|clean|daily)'"
alias pm-check-cron="crontab -l"
alias pm-check-data="ls -la ~/.personalmanager/data/"
```

---

## 📊 响应质量监控

### 成功指标
- ✅ 用户需求在5分钟内得到响应
- ✅ 80%的需求通过现有功能解决
- ✅ 避免不必要的代码开发
- ✅ 用户满意度保持高水平

### 失败信号
- ❌ 经常写代码解决简单问题
- ❌ 重复创建类似功能
- ❌ 用户反复询问相同类型问题
- ❌ 系统复杂度不断增加

---

## 🎯 实战应用示例

### 示例1: "我想每天自动同步习惯"
```
1. [立即检查] crontab -l
2. [发现] 已有 sync_habits_to_tasks.py 每天01:00运行
3. [响应] "您的习惯已经在每天凌晨1点自动同步到Google Tasks了"
4. [类型] Type A - 功能使用咨询
5. [时间] <2分钟
```

### 示例2: "习惯提醒时间改成9点"
```
1. [立即检查] cat ~/.personalmanager/data/habits/habits.json
2. [发现] reminder_time字段可以修改
3. [执行] 直接修改配置文件
4. [类型] Type B - 配置调整
5. [时间] <5分钟
```

### 示例3: "添加一个新的项目管理功能"
```
1. [立即检查] pm projects --help, pm project --help
2. [发现] 已有完整的项目管理命令组
3. [演示] 现有项目管理功能
4. [类型] Type A - 功能使用咨询
5. [时间] <3分钟
```

---

**适用场景**: 每次收到用户需求时的第一响应
**更新频率**: 根据使用经验持续优化
**维护者**: Claude (PersonalManager AI Assistant)